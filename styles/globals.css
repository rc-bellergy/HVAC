:root{
  --bg:#0b1220;
  --hud:#0e1a2f;
  --accent:#24d6ff;
  --accent2:#00ffa9;
  --warn:#ff7b00;
  --alert:#ff355d;
  --glow: drop-shadow(0 0 6px #4cf2ff) drop-shadow(0 0 18px #4cf2ff);
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
}

html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 60% -20%, #294b7a33 0%, transparent 60%), var(--bg); color:#dbe9ff; font-family:var(--sans);}

#app{position:fixed; inset:0; display:grid; grid-template-rows:auto 1fr auto;}

/* Top HUD */
.hud{
  display:flex; gap:2rem; align-items:center; padding:.6rem .75rem; flex-wrap:wrap;
  background:linear-gradient(180deg, #0b1527ee, #08101cee);
  border-bottom:1px solid #1f3355;
  backdrop-filter: blur(6px) saturate(120%);
  z-index:12;
}

.hud .brand{font-weight:700; letter-spacing:.3px; color:#e8f7ff;}
.hud .dot{width:8px; height:8px; border-radius:50%; background:#49f3ff; box-shadow:0 0 12px #49f3ff;}
.hud .sp{flex:1}
.hud .btn, .hud .seg input+label{
  color:#dff7ff; background:#0d233d; border:1px solid #1f406a; border-radius:8px; padding:.45rem .7rem; cursor:pointer;
  display:inline-flex; align-items:center; gap:.4rem; transition:.2s; font-family:var(--mono); font-size:.9rem;
}
.hud .btn:hover{background:#123055}
.hud .seg{display:inline-flex; border-radius:10px; overflow:hidden; border:1px solid #1f406a}
.hud .seg input{display:none}
.hud .seg label{padding:.45rem .65rem; background:#0d233d; border-right:1px solid #1f406a; cursor:pointer; font-family:var(--mono)}
.hud .seg label:last-child{border-right:none}
.hud .seg input:checked + label{background:#143b66; color:#8ff6ff}
.legend{
  display:flex; gap:10px; align-items:center; font-size:.9rem; color:#b9d7ff;
  filter: var(--glow);
}
.chip{display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .5rem; background:#0a1a2f; border:1px solid #1e3a63; border-radius:999px}
.sw{width:10px;height:10px;border-radius:3px;box-shadow:0 0 8px currentColor}
.sw.ok{color:#00ffa9;background:#00ffa9}
.sw.warn{color:#ff7b00;background:#ff7b00}
.sw.alert{color:#ff355d;background:#ff355d}

/* Canvas layers */
#three-container {position:relative; width:100%; height:100%; overflow:hidden;}
.webgl{display:block; position:absolute; inset:0; width:100%; height:100%}

/* CSS2D labels */
.label{
  padding:.25rem .45rem; background:#051126cc; border:1px solid #1c365d; color:#bfe9ff; border-radius:6px; font:600 12px var(--mono);
  backdrop-filter: blur(3px); box-shadow:0 0 12px #3af2ff33 inset, 0 0 14px #3af2ff22;
  white-space:nowrap;
}
.label .value{color:#eaffff}
.label.warn{border-color:#ff7b00; color:#ffd9b5; box-shadow:0 0 14px #ff7b0033 inset}
.label.alert{border-color:#ff355d; color:#ffd5df; box-shadow:0 0 14px #ff355d33 inset}

/* Pipe labels */
.pipe-label{
  background:#1a2a4aee;
  border:1px solid #3a5a8a;
  color:#a0c0e0;
  font-size:11px;
  padding:.2rem .4rem;
  box-shadow:0 0 8px #3af2ff22 inset, 0 0 10px #3af2ff11;
}

/* Side panels */
.side{
  position:fixed; top:100px; width:320px; max-width:86vw; display:grid; grid-template-rows:auto auto auto;
  gap:.6rem; padding:.6rem; background:linear-gradient(180deg, #081221f0, #091425ee);
  border:1px solid #1c355c; border-radius:12px; z-index:11; backdrop-filter: blur(8px);
}
.side.left { left: 10px; }
.side.right { right: 10px; }
.panel{border:1px solid #1f3a62; border-radius:10px; background:#0a182b; padding:.6rem}
.panel h3{margin:.1rem 0 .6rem 0; font-size:1rem; color:#e5f3ff}
.kv{display:grid; grid-template-columns: 1fr auto; gap:.35rem .8rem; align-items:center; font-family:var(--mono); color:#bfe6ff}
.big{font-size:1.9rem; font-weight:800; letter-spacing:.5px}
#spark{width:100%; height:70px; background:#051022; border-radius:8px}
.footer{
  display:flex; justify-content:center; gap:1rem; padding:.4rem; color:#7aa7d6; font:600 12px var(--mono); border-top:1px solid #1e3352; background:#081427;
}

/* Mobile tweaks */
@media (max-width:768px){
  .hud{gap:.4rem}
  .side{right:6px; top:auto; bottom:6px; width:auto; grid-template-rows:auto; grid-auto-rows:auto}
  .big{font-size:1.4rem}
  #spark{height:54px}
}

/* Styles from 02.html for migrated panels */
.panel-section {
    margin-bottom: 25px;
}

.section-title {
    font-size: 12px;
    color: #40e0d0;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.metric-box {
    background: rgba(64, 224, 208, 0.05);
    border: 1px solid rgba(64, 224, 208, 0.2);
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 10px;
}

.metric-label {
    font-size: 11px;
    color: #8892b0;
    margin-bottom: 5px;
}

.metric-value {
    font-size: 24px;
    color: #40e0d0;
    font-weight: bold;
}

.metric-unit {
    font-size: 14px;
    color: #8892b0;
    margin-left: 5px;
}

.chart-container {
    height: 120px;
    position: relative;
    margin-top: 10px;
}

#efficiency-chart {
    width: 100%;
    height: 100%;
}

.status-section {
    background: rgba(15, 20, 30, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(64, 224, 208, 0.3);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
}

.compressor-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 10px;
}

.compressor-unit {
    background: rgba(64, 224, 208, 0.05);
    border: 1px solid rgba(64, 224, 208, 0.2);
    border-radius: 5px;
    padding: 10px;
    text-align: center;
    position: relative;
}

.compressor-unit.active {
    border-color: #40e0d0;
    background: rgba(64, 224, 208, 0.1);
}

.compressor-icon {
    width: 30px;
    height: 30px;
    margin: 0 auto 5px;
    background: linear-gradient(135deg, #40e0d0, #1e90ff);
    border-radius: 5px;
    position: relative;
}

.compressor-label {
    font-size: 10px;
    color: #8892b0;
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    position: absolute;
    top: 5px;
    right: 5px;
    background: #40e0d0;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.bar-chart {
    margin-top: 15px;
}

.bar-item {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
}

.bar-label {
    font-size: 11px;
    color: #8892b0;
    width: 80px;
}

.bar-container {
    flex: 1;
    height: 20px;
    background: rgba(64, 224, 208, 0.1);
    border-radius: 3px;
    overflow: hidden;
    position: relative;
}

.bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #40e0d0, #1e90ff);
    border-radius: 3px;
    transition: width 0.5s ease;
}